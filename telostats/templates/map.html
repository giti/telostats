{% extends 'base.html' %}
{% load static from staticfiles %}

{% block extra_head %}
  <link href='//api.tiles.mapbox.com/mapbox.js/v0.6.6/mapbox.css' rel='stylesheet'>
{% endblock extra_head %}

{% block body %}
    <div id="map"></div>

    <div class="flyout" id="maininfo">
        <header>
            <h1>טלוסטס</h1>
            <h2>ועכשיו לקצת טקסט בעברית.</h2>
            <p>זה מראה אופניים על מפה. אם זה אדום, אין אופניים. אם זה כחול, אין חניה. אם זה לבן, הכל בסדר.</p>
        </header>
        <section class="l-key">
            <h1>מפתח</h1>
            <ul>
                <li data-bucket="0">
                    <div class="swatch"></div>
                    <strong>0</strong>
                    אופניים
                </li>
                <li data-bucket="1">
                    <div class="swatch"></div>
                    <strong>5</strong>
                    אופניים
                </li>
                <li data-bucket="2">
                    <div class="swatch"></div>
                    <strong>תקין</strong>
                </li>
                <li data-bucket="3">
                    <div class="swatch"></div>
                    <strong>5</strong>
                    חנייות
                </li>
                <li data-bucket="4">
                    <div class="swatch"></div>
                    <strong>0</strong>
                    חנייות
                </li>

            </ul>
        </section>

        <footer>
            <ul>
                <li><a href="{% url about %}" id="about" class="static-flyout" data-flyout="#aboutflyout">אודות</a></li>
                <li><a href="{% url about_api %}" id="api" class="static-flyout" data-flyout="#apiflyout">API</a></li>
                <li><a href="#" id="contact">צור קשר</a></li>
                <li>כל הזכויות שמורות &copy; 2012</li>
            </ul>
        </footer>
    </div>

    <div class="flyout secondary {% block aboutflyout_state %}hidden{% endblock aboutflyout_state %}" id="aboutflyout">
        {% block aboutflyout %}
        <a href="{% url home %}" class="close-flyout">&#10006;</a>
        <h2>אודות Telostats</h2>
        <section id="about">
            <p>Telostats פותח כדי לתת מענה למשתמשי שירות תל-אופן על מנת שיוכלו לבצע שימוש מוצלח יותר בשירות.</p>
        </section>
        <section id="api">
            <p>כל המידע ממערכת Telostats פתוח וחופשי לכל משתמש. קוד המקור שלנו זמין בGithub (<a href="https://github.com/idan/telostats">כאן</a> ו<a href="https://github.com/idan/telostats-tiles">כאן</a>). המידע של Telostats זמין בAPI סטנדרטי.</p>
        </section>
        <section id="people">
            <p>Telostats פותח על ידי <a href="http://y3xz.com">יובל אדם</a> ו<a href="http://gazit.me">עידן גזית</a>.</p>
        </section>
        {% endblock aboutflyout %}
    </div>

    <div class="flyout secondary {% block apiflyout_state %}hidden{% endblock apiflyout_state %}" id="apiflyout">
        {% block apiflyout %}
        <a href="{% url home %}" class="close-flyout">&#10006;</a>
        <h2>API</h2>
        <p>אנחנו מאמינים בצורך במידע חופשי. כל המידע הנאסף על ידי Telostats זמין ונגיש באמצעות RESTful API סנדרטי.</p>
        <p><strong>נקודת קצה: </strong><a href="/api/v1?format=json">http://telostats.com/api/v1</a></p>
        {% endblock apiflyout %}
    </div>

    <div id="stationflyouts">
        <div class="flyout secondary stationflyout {% block stationflyout_state %}hidden{% endblock stationflyout_state %}" data-id="{% block stationid %}{% endblock stationid %}">
            {% block stationflyout %}
            {% endblock stationflyout %}
        </div>
    </div>
{% endblock body %}

{% block body_js %}
    {{ block.super }}
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore.js"></script>
    <script src="//d3js.org/d3.v2.js"></script>
    <script src='//api.tiles.mapbox.com/mapbox.js/v0.6.6/mapbox.uncompressed.js'></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ICanHaz.js/0.10/ICanHaz.min.js"></script>

    <script>
        TILESERVER_URL = "{{ tileserver_url }}";
    </script>

    <script id="stationflyout_template" type="text/html">
        <div class="flyout secondary stationflyout hidden" data-id="{% templatetag openvariable %} stationid {% templatetag closevariable %}"></div>
    </script>

    <script src="{% static 'js/jquery.pjax.js' %}"></script>
    <script src="{% static 'js/app.js' %}"></script>
{% endblock body_js %}