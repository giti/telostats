{% extends 'base.html' %}
{% load static from staticfiles %}

{% block extra_head %}
  <link href='//api.tiles.mapbox.com/mapbox.js/v0.6.6/mapbox.css' rel='stylesheet'>
{% endblock extra_head %}

{% block body %}
    <div id="map"></div>

    <div class="flyout" id="maininfo">
        <header>
            <h1>Tel-O-Stats</h1>
            <h2>כל המידע שצריך לתכנון הנסיעה</h2>
            <p>גם אנחנו חושבים שתל-אופן זה הדבר הכי טוב שקרה לתל אביב בשנים האחרונות. אז החלטנו לקחת את כל המידע של המערכת ולהציג אותו בצורה חדה, ברורה ופתוחה כדי שכולנו נוכל לבצע שימוש נכון וחכם יותר באופניים הירוקות של תל אביב.</p>
        </header>
        <section class="l-key">
            <h1>מפתח</h1>
            <ul>
                <li data-bucket="0">
                    <div class="swatch"></div>
                    <strong>0</strong>
                    אופניים
                </li>
                <li data-bucket="1">
                    <div class="swatch"></div>
                    <strong>5</strong>
                    אופניים
                </li>
                <li data-bucket="2">
                    <div class="swatch"></div>
                    <strong>תקין</strong>
                </li>
                <li data-bucket="3">
                    <div class="swatch"></div>
                    <strong>5</strong>
                    חניות
                </li>
                <li data-bucket="4">
                    <div class="swatch"></div>
                    <strong>0</strong>
                    חניות
                </li>
            </ul>
        </section>

        <footer>
            <ul>
                <li><a href="{% url about %}" id="about" class="static-flyout" data-flyout="#aboutflyout">אודות</a></li>
                <li><a href="{% url about_api %}" id="api" class="static-flyout" data-flyout="#apiflyout">API</a></li>
                <li><a href="#" id="contact">צור קשר</a></li>
                <li>כל הזכויות שמורות &copy; 2012</li>
            </ul>
        </footer>
    </div>

    <div class="flyout secondary {% block aboutflyout_state %}hidden{% endblock aboutflyout_state %}" id="aboutflyout">
        {% block aboutflyout %}
        <a href="{% url home %}" class="close-flyout">&#10006;</a>
        <h2>אודות</h2>
        <section id="about">
            <p>כל מי שמשתמש בתל-אופן, האופניים הירוקות של תל אביב, מסכים על שני דברים: שמדובר באחד השדרוגים הכי טובים שעברו על תל אביב בשנים האחרונות, ושיש עוד הרבה מה לשפר.</p>
            <p>Tel-O-Stats פותח במטרה להנגיש לציבור מידע שיאפשר לו לבצע שימוש נכון וחכם בשירות האופניים של תל אביב. המידע נאסף, קיים וזמין - אם רק נציג אותו בצורה חדה וברורה, אפשר יהיה לשפר משמעותית את השימוש בשירות.</p>
        </section>
        <section id="api">
            <p>אנחנו מאמינים גדולים במידע פתוח וקוד פתוח. כל המידע ממערכת Telostats פתוח וחופשי לכל משתמש. קוד המקור שלנו זמין בGithub (<a href="https://github.com/idan/telostats">כאן</a> ו<a href="https://github.com/idan/telostats-tiles">כאן</a>). המידע מ-Tel-O-Stats זמין בAPI סטנדרטי.</p>
        </section>
        <section id="people">
            <p>Telostats פותח על ידי <a href="http://y3xz.com">יובל אדם</a> ו<a href="http://gazit.me">עידן גזית</a> בצורה עצמאית וללא כל מימון.</p>
        </section>
        {% endblock aboutflyout %}
    </div>

    <div class="flyout secondary {% block apiflyout_state %}hidden{% endblock apiflyout_state %}" id="apiflyout">
        {% block apiflyout %}
        <a href="{% url home %}" class="close-flyout">&#10006;</a>
        <h2>API</h2>
        <p>אנחנו מאמינים שמידע ציבורי חייב להיות פתוח וחופשי. כל המידע הנאסף על ידי Tel-O-Stats פתוח לשימוש חופשי וללא הגבלה באמצעות RESTful API (ממשק תכנות) סטנדרטי.</p>
        <p><strong>נקודת קצה: </strong><a href="/api/v1?format=json">http://telostats.com/api/v1</a></p>
        {% endblock apiflyout %}
    </div>

    <div id="stationflyouts">
        <div class="flyout secondary stationflyout {% block stationflyout_state %}hidden{% endblock stationflyout_state %}" data-id="{% block stationid %}{% endblock stationid %}">
            {% block stationflyout %}
            {% endblock stationflyout %}
        </div>
    </div>
{% endblock body %}

{% block body_js %}
    {{ block.super }}
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore.js"></script>
    <script src="//d3js.org/d3.v2.js"></script>
    <script src='//api.tiles.mapbox.com/mapbox.js/v0.6.6/mapbox.uncompressed.js'></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/ICanHaz.js/0.10/ICanHaz.min.js"></script>

    <script>
        TILESERVER_URL = "{{ tileserver_url }}";
    </script>

    <script id="stationflyout_template" type="text/html">
        <div class="flyout secondary stationflyout hidden" data-id="{% templatetag openvariable %} stationid {% templatetag closevariable %}"></div>
    </script>

    <script src="{% static 'js/jquery.pjax.js' %}"></script>
    <script src="{% static 'js/app.js' %}"></script>
{% endblock body_js %}